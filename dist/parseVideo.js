"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}Object.defineProperty(exports,"__esModule",{value:!0});var _config=require("./config"),config=_interopRequireWildcard(_config),_down=require("./down"),_down2=_interopRequireDefault(_down),request=require("superagent"),cheerio=require("cheerio"),async=require("async"),parseVideo=function(e){async.mapLimit(e,5,function(e,r){console.log("enter "+e),request.get(e).set(config.headers).end(function(e,t){e&&r(null,{success:"no",href:null,title:bull});var n=cheerio.load(t.text),i=n("title").text().trim();i=i.substring(0,i.indexOf("-"));var o=n("source").attr("src");r(null,{success:"ok",href:o,title:i})})},function(e,r){r.forEach(function(e){return(0,_down2.default)(e)})})};exports.default=parseVideo;
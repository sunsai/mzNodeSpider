"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _parseVideo=require("./parseVideo"),_parseVideo2=_interopRequireDefault(_parseVideo),request=require("superagent"),cheerio=require("cheerio"),async=require("async"),url=require("url"),config=require("./config"),_=require("lodash"),get_courses=function(e){async.mapLimit(e,2,function(e,r){request.get(e).set(config.headers).end(function(t,s){t?r(null,Object.assing({title:"",href:e},{success:"no",err:t,data:null})):!function(){var t=cheerio.load(s.text),u=[],i=t("div.fl.vlesson-infoR h1").text();t("ul.lesson-lists a").each(function(){u.push(url.resolve(config.base_url,t(this).attr("href")))}),r(null,Object.assign({title:i,href:e},{success:"ok",err:null,data:u}))}()})},function(e,r){if(e)console.log(e);else{var t=r.filter(function(e){return"ok"==e.success}).map(function(e){return e.data});(0,_parseVideo2.default)(_.flatten(t))}})};exports.default=get_courses;